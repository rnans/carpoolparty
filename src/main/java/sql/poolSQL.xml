<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sql.poolSQL">
	<select id="getUserInfo" parameterType="String" resultType="su.member.model.MemberDTO">
		select * from userinfo where id=#{id}
	</select>

	<insert id="poolMemberAdd" parameterType="su.pool.model.PoolDTO">
		insert into reservationlist 
		values(
		reservationlist_idx.nextval,
		'test',
		#{aim},
		#{startspot},
		#{endspot},
		#{route},
		'test',
		'test',
		'test',
		TO_date(#{starttime},'yyyy-mm-dd hh24:mi'),
		#{mannum},
		#{gender},
		0,
		#{smoking},
		#{pluscontent},
		sysdate,
		'test',
		'test',
		sysdate,
		sysdate,
		'test',
		'서울')
	</insert>
	
	<select id="totalCnt" resultType="int">
		select count(*) from reservationlist
	</select>
	
	<select id="viewAllList" parameterType="Map" resultType="su.pool.model.PoolDTO">
		select 
			idx,
			userid,
			aim,
			startspot,
			endspot,
			route,
			startcoordi,
			endcoordi,
			routecoordi,
			to_char(starttime,'YYYY-MM-DD'),
			mannum,
			gender,
			pay,
			smoking,
			pluscontent,
			to_char(writedate,'yyyy-mm-dd'),
			status,
			type,
			to_char(startdate,'yyyy-mm-dd'),
			to_char(enddate,'yyyy-mm-dd'),
			days,
			location 
		from
	   (select rownum as rnum,a.* from
	   (select * from reservationlist order by idx desc)a)b
	   where rnum<![CDATA[>=]]>#{startnum} and rnum<![CDATA[<=]]>#{endnum}
	</select>
	
	<select id="viewEachContent" parameterType="int" resultType="su.pool.model.PoolDTO">
		select 
			idx,
			userid,
			aim,
			startspot,
			endspot,
			route,
			startcoordi,
			endcoordi,
			routecoordi,
			to_char(starttime,'YYYY-MM-DD'),
			mannum,
			gender,
			pay,
			smoking,
			pluscontent,
			to_char(writedate,'yyyy-mm-dd'),
			status,
			type,
			to_char(startdate,'yyyy-mm-dd'),
			to_char(enddate,'yyyy-mm-dd'),
			days,
			location 
		from reservationlist where idx=#{idx}
	</select>
	
</mapper>
