<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sql.comm">

	<insert id="commWrite" parameterType="su.comm.model.commBBSDTO">
		insert into commbbs values(comm_idx.nextval, 'test',
        #{id}, '남구문', #{content},  sysdate, '0', 0)
	</insert>
	
	<select id="bbsList" resultType="su.comm.model.commBBSDTO">
			select * from commBBS order by idx desc
	</select>

	<insert id="scheWrite" parameterType="su.comm.model.scheDTO">
		insert into schedule values(schedule_idx.nextval,  #{id}, 'test', 
		#{subject, jdbcType=VARCHAR}, #{content, jdbcType=VARCHAR}, #{startday, jdbcType=VARCHAR}, #{stime} ,  #{endday, jdbcType=VARCHAR}, #{etime} , #{banbok, jdbcType=VARCHAR}, sysdate)
	</insert>
	
	<select id="scheList" resultType="su.comm.model.scheDTO">
			select * from schedule order by idx desc
	</select>
	
	<select id="commmember" parameterType="String" resultType="su.comm.model.carpoolinfoDTO">
		select * from carpoolinfo where poolname='test'
	</select>
	
	<delete id="commbbsdel" parameterType="String">
		delete from commBBS where idx=#{idx}
	</delete>
	
	<insert id="imguplad" parameterType="String">
		insert into file_upload values(file_upload_idx.nextval, 'test',
        #{filename}, 1,  'test')
	</insert>
	
	<insert id="reWrite" parameterType="su.comm.model.CommBBSreDTO">
		insert into commbbs_re values(commbbs_re_idx.nextval, 'test', #{bbsidx},
        #{id},  #{name}, #{content}, sysdate)
	</insert>
	
	<select id="reList" parameterType="String"  resultType="su.comm.model.CommBBSreDTO">
		select * from commBBS_re where commid=#{commid} order by idx asc 
	</select>
	
		<delete id="redel" parameterType="String">
		delete from commBBS_re where idx=#{idx}
	</delete>
	
	<!-- adminComm -->
	<select id="memberCommList" parameterType="Map" resultType="su.comm.model.carpoolinfoDTO">
		select distinct poolname, name, idx from
	   (select rownum as rnum,a.* from
	   (select * from carpoolinfo order by idx desc)a)b
	   where rnum<![CDATA[>=]]>#{startnum} and rnum<![CDATA[<=]]>#{endnum}
	</select>
	
	<select id="commTotalCnt" resultType="int">
		select count(*) from carpoolinfo
	</select>
	
	<select id="bbssearch" parameterType="String" resultType="su.comm.model.commBBSDTO">
		select * from commbbs where poolname='test' and id like '%'||#{search}||'%' or content like '%'||#{search}||'%'
	</select>
	
</mapper>